# 🚀 启动和配置步骤

## 📝 当前状态

✅ 后端已成功启动（http://localhost:8080）
✅ 静态资源已配置（cover1.png 和 video1.mp4）
⚠️ 需要更新数据库中的视频URL

## 🔧 配置步骤

### 步骤1：更新数据库视频URL

在MySQL中执行以下命令：

```bash
mysql -u root -p cvs_db < D:/BaiduSyncdisk/university/毕业/毕业设计/CVS-system/CVS-port/update-video-urls.sql
```

或者手动执行SQL：

```sql
USE cvs_db;

-- 更新所有视频的URL为本地静态资源
UPDATE `video` SET 
    `video_url` = 'http://localhost:8080/static/video/video1.mp4',
    `thumbnail_url` = 'http://localhost:8080/static/cover/cover1.png'
WHERE 1=1;

-- 确保视频状态为已审核（1=已审核通过）
UPDATE `video` SET `status` = 1 WHERE `status` = 0;

-- 查看更新后的数据
SELECT id, title, video_url, thumbnail_url, status FROM video;
```

### 步骤2：重启后端（如果需要）

如果后端已经在运行，需要重启以加载新的WebConfig配置：

```bash
# 停止当前运行的后端（Ctrl+C）
# 然后重新启动
cd CVS-port
mvn spring-boot:run
```

### 步骤3：启动前端

```bash
cd CVS-view
npm run dev
```

### 步骤4：访问应用

打开浏览器访问：http://localhost:5173

## 🧪 测试功能

### 1. 测试视频列表
- 访问首页或视频广场
- 应该能看到视频卡片，每个卡片显示封面图片（cover1.png）
- 点击视频卡片进入详情页

### 2. 测试视频播放
- 在视频详情页，应该能看到视频播放器
- 点击播放按钮，应该能播放video1.mp4

### 3. 测试点赞功能
- 登录后（admin/123456 或 user1/123456）
- 在视频详情页点击"点赞"按钮
- 点赞数应该增加，按钮状态应该改变

### 4. 测试收藏功能
- 登录后点击"收藏"按钮
- 收藏数应该增加
- 在个人中心可以看到收藏的视频

### 5. 测试评论功能
- 登录后在评论区输入评论
- 点击发表，评论应该显示在评论列表中

### 6. 测试视频上传
- 登录后访问上传页面
- 填写视频信息
- 暂时使用URL上传：http://localhost:8080/static/video/video1.mp4
- 封面URL：http://localhost:8080/static/cover/cover1.png

### 7. 测试管理员功能
- 使用admin账号登录（admin/123456）
- 访问管理后台
- 应该能看到待审核的视频
- 可以审核通过或拒绝视频

## 🐛 常见问题

### 问题1：视频无法播放
**解决方案**：
1. 检查浏览器控制台是否有CORS错误
2. 确认后端已重启并加载了新的WebConfig
3. 访问 http://localhost:8080/static/video/video1.mp4 确认视频可以直接访问

### 问题2：封面图片不显示
**解决方案**：
1. 访问 http://localhost:8080/static/cover/cover1.png 确认图片可以直接访问
2. 检查数据库中的thumbnail_url是否正确
3. 检查浏览器控制台的Network标签，查看图片请求状态

### 问题3：点赞/收藏不生效
**解决方案**：
1. 确保已登录
2. 检查浏览器控制台是否有错误
3. 检查后端日志

### 问题4：评论无法发表
**解决方案**：
1. 确保已登录
2. 检查评论内容不为空
3. 查看后端日志

## 📊 数据库状态检查

执行以下SQL检查数据库状态：

```sql
USE cvs_db;

-- 检查用户表
SELECT id, username, nickname, role, status FROM user;

-- 检查视频表
SELECT id, title, city, video_url, thumbnail_url, status, view_count, like_count, collect_count FROM video;

-- 检查评论表
SELECT id, video_id, user_id, content, status FROM comment LIMIT 10;

-- 检查点赞表
SELECT video_id, COUNT(*) as like_count FROM video_like GROUP BY video_id;

-- 检查收藏表
SELECT video_id, COUNT(*) as collect_count FROM video_collect GROUP BY video_id;
```

## ✅ 验证清单

完成配置后，请验证以下功能：

- [ ] 后端正常启动（http://localhost:8080）
- [ ] 前端正常启动（http://localhost:5173）
- [ ] 可以访问静态资源（图片和视频）
- [ ] 视频列表正常显示
- [ ] 视频详情页正常显示
- [ ] 视频可以正常播放
- [ ] 登录功能正常
- [ ] 点赞功能正常
- [ ] 收藏功能正常
- [ ] 评论功能正常
- [ ] 视频上传功能正常
- [ ] 管理员审核功能正常

## 🎯 下一步

所有功能验证通过后，你可以：

1. 添加更多测试视频和封面
2. 完善视频上传功能（支持文件上传）
3. 优化UI界面
4. 添加更多功能（如视频分类、标签等）
5. 准备部署到生产环境

---

**提示**：如果遇到任何问题，请查看：
- [快速问题解决.md](./快速问题解决.md)
- [常见问题FAQ.md](./常见问题FAQ.md)
- 后端日志（控制台输出）
- 前端浏览器控制台（F12）

